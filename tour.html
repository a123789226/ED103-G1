<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>
    <script src="./js/layout/header.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <title>Aqua Wonderland</title>
</head>
<body class="tourBody">
  <!-- 下面是背景的div，先不要動到 -->
  <div class="tourbg">
    <div class="commonBG00 commonBGSet"></div>
    <div class="commonBG01 commonBGSet"></div>
    <div class="commonBG02 commonBGSet"></div>
    <div class="commonBGLeft commonBGSet"></div>
    <div class="commonBGRight commonBGSet"></div>
    <img src="./image/background/fish1.png" alt="" class="BGFish1">
    <img src="./image/background/fish9.png" alt="" class="BGFish2">
  </div> 
  <!-- 上面是背景的div，先不要動到 -->

   <!-- Log In開始 -->
   <div id="memLightBox" class="memLogin overlay">
    <form action="" class="LogInForm" id="LogInForm" method="post">
      <div class="btn_modal_close">
        <div></div>
        <div></div>
      </div>
      <h3 class="memLogTitle">LOG IN</h3>
      <input type="text" name="memId" id="memId" minlength="6" maxlength="12" pattern="[A-Za-z0-9]*" placeholder="Username" onfocus="this.placeholder=''" onblur="this.placeholder='Username'" size="25"/><br>
      <input type="password" name="memPsw" id="memPsw" minlength="6" maxlength="12" pattern="[A-Za-z0-9]*" placeholder="Password" onfocus="this.placeholder=''" onblur="this.placeholder='Password'" size="25"/><br>
      <h6><a href="./memberLock.html" class="memForgot memForget_modal">Forget Password?</a></h6><br>
      <input type="button" class="submitBtnLog" id="btnLogin" value="LOG IN"><br>
      <div class="memLine">
        <h5>OR</h5>
      </div>
      <p>Don't have an account?</p><br>
      <a href="./memberlogin.html"><button type="button" class="submitBtnSign" id="btnSignup">SIGN UP</button></a>
    </form>
  </div>
  <!-- Log In結束 -->
  
  <!-- header開始 -->
  <header class="main_menu">
    <!-- header第一區塊 主導覽列 -->
    <nav class="main_nav">
      <div class="logo_box">
        <a href="homepage.html" class="logo">
          <img src="./image/header/logo.png" alt="">
        </a>
        <a href="" class="logo_text_box">
          <h1 class="logo_text">AQUA WONDERLAND</h1>
        </a>
      </div>
      <ul class="main_menu_ul" id="main_menu_ul">
        <li class="main_menu_li active">
          <a href="tour.html" class="li_logo">
            <img src="./image/header/header_tour.png" alt="">
            <img src="./image/header/header_tour_cover.png" alt="">
          </a>
          <a href="tour.html" class="li_text">TOUR</a>
        </li>
        <li class="main_menu_li active">
          <a href="journal.html" class="li_logo">
            <img src="./image/header/header_journal.png" alt="">
            <img src="./image/header/header_journal_cover.png" alt="">
          </a>
          <a href="journal.html" class="li_text">JOURNAL</a>
        </li>
        <li class="main_menu_li active">
          <a href="ticket.html" class="li_logo">
            <img src="./image/header/header_ticket.png" alt="">
            <img src="./image/header/header_ticket_cover.png" alt="">
          </a>
          <a href="ticket.html" class="li_text">TICKET</a>
        </li>
        <li class="main_menu_li active">
          <a href="vote.html" class="li_logo">
            <img src="./image/header/header_vote.png" alt="">
            <img src="./image/header/header_vote_cover.png" alt="">
          </a>
          <a href="vote.html" class="li_text">VOTE</a>
        </li>
        <li class="main_menu_li active">
          <a href="blog1.php" class="li_logo">
            <img src="./image/header/header_blog.png" alt="">
            <img src="./image/header/header_blog_cover.png" alt="">
          </a>
          <a href="blog1.php" class="li_text">BLOG</a>
        </li>
      </ul>
      <div class="header_right">
        <span class="member_box btn_modal" id="btn_modal">
          <img src="./image/header/header_member_fish.png" alt="" title="Log In" id="memberPic" onerror="javascript:this.src='./image/header/header_member_fish_login.png'">
        </span>
        <a class="cart_box" href="cart.html">
          <img src="./image/header/header_cart.png" alt="">
          <span class="cart_amount"></span>
        </a>
        <div class="hamburger_box" id="hamburger_box">
          <div class="hamburger">
            <span class="hamburger_line is-active" id="hamburger_line"></span>
            <span class="hamburger_cross" id="hamburger_cross">&times;</span>
          </div>
        </div>
      </div>
    </nav>
    
    <!-- header第二區塊 會員登入後點頭像出線的小窗 -->
    <div class="memProfileBlock" id="memProfileBlock" style="display: none;">
      <p class="memNameInProfileBlock"><span>Hello!&nbsp;&nbsp;</span><span id="memNameInProfileBlock"></span></p>
      <a href="./memberProfile.html" class="memProfileLink">Member Profile</a>
      <p id="SignOutLink">Sign Out</p>
    </div>

  </header> 

  <!-- header結束 -->

  <div>
    <div class="commonTitleBox">
      <h2 class="commonTitle">Welcome to Aqua wonderland !</h2>
    </div>
    <!-- 你的code打這下面 -->
    <main class="team_main">
      <!-- 標題 與 拼圖按鈕 -->
      <div class = "tour_title_block">
        <div class="tour_title_area">
          <h1 class="tour_title1">Tour</h1>
        </div>  
        <div class="tour_btn">
          <a href="puzzle.html" class="tour_puzzle">
          <button class="tour_puzzle_btn">Puzzle</button>
          </a>
        </div>        
      </div>
  
      <!------------------------ 大地圖 --------------------------->
      <div class="tour_map_area">
        <img class="tour_island" src="./image/tour/tour_island.png" alt="error">
        <div class="tour_map_house1">
          <img class="tour_house1 tour_houseA tour_house_show" src="./image/tour/house1.png" alt="error">
          <img class="tour_house1_hover tour_houseB" src="./image/tour/house1_hover.png" alt="error">
          <img class="tour_dolphin_wave" src="./image/tour/tour_dolphin_wave.png" alt="error">
        </div>
        <div class="tour_map_house2">
          <img class="tour_house2 tour_houseA tour_house_show" src="./image/tour/house2.png" alt="error">   
          <img class="tour_house2_hover tour_houseB" src="./image/tour/house2_hover.png" alt="error"> 
          <img class="tour_whale_wave" src="./image/tour/tour_whale_wave.png" alt="error">

        </div>
        <div class="tour_map_house3">
          <img class="tour_house3 tour_houseA tour_house_show" src="./image/tour/house3.png" alt="error">
          <img class="tour_house3_hover tour_houseB" src="./image/tour/house3_hover.png" alt="error">
          <img class="tour_seal_wave" src="./image/tour/tour_seal_wave.png" alt="error">  
        </div>
        <div class="tour_map_house4">
          <img class="tour_house4 tour_houseA tour_house_show" src="./image/tour/house4.png" alt="error">
          <img class="tour_house4_hover tour_houseB" src="./image/tour/house4_hover.png" alt="error">  
          <img class="tour_seaturtle_wave" src="./image/tour/tour_seaturtle_wave.png" alt="error">
        </div>
      </div> 
  
        
        <!------------------------ 房子的圖文介紹 ------------------------>
        <div class="tour_overlay1">
        <article>
          <h4>Dolphin Aquarium</h4>
          <p>This is a two-story building with a slanted roof, which can keep the museum warm in winter and cool in summer in hot summer. At present, the museum houses about 30 dolphins. Under the careful care of the staff, they gradually recover their health and vitality. Here, you can admire the dolphins up close and feel their cuteness and wonder.</p>
          <img class="tour_overlay1img" src="./image/tour/tour_intro_dolphin.jpg" alt="error">
          <div class="btn_modal">
          <button type="button" class="btn_modal_close1" id="btn1">Introduction</button>
          <button type="button" class="btn_modal_close2">Close</button>
          </div>
        </article>
        </div>
  
        <div class="tour_overlay2">
          <article>
            <h4>whale Aquarium</h4>
            <p>This is a two-story building with a slanted roof, which can keep the museum warm in winter and cool in summer in hot summer. At present, the museum houses about 30 dolphins. Under the careful care of the staff, they gradually recover their health and vitality. Here, you can admire the dolphins up close and feel their cuteness and wonder.</p>
            <img class= "tour_overlay2img" src="./image/tour/tour_intro_whale.jpg" alt="error">
            <div class="btn_modal">
            <button type="button" class="btn_modal_close1" id="btn2">Introduction</button>
            <button type="button" class="btn_modal_close2">Close</button>
            </div>
          </article>
        </div>
  
          <div class="tour_overlay3">
            <article>
              <h4>Seal Aquarium</h4>
              <p>This is a two-story building with a slanted roof, which can keep the museum warm in winter and cool in summer in hot summer. At present, the museum houses about 30 dolphins. Under the careful care of the staff, they gradually recover their health and vitality. Here, you can admire the dolphins up close and feel their cuteness and wonder.</p>
              <img class= "tour_overlay3img" src="./image/tour/tour_intro_seal.jpg" alt="error">
              <div class="btn_modal">
              <button type="button" class="btn_modal_close1" id="btn3">Introduction</button>
              <button type="button" class="btn_modal_close2">Close</button>
              </div>
            </article>
          </div>
  
          <div class="tour_overlay4">
            <article>
              <h4>Turtle Aquarium</h4>
              <p>This is a two-story building with a slanted roof, which can keep the museum warm in winter and cool in summer in hot summer. At present, the museum houses about 30 dolphins. Under the careful care of the staff, they gradually recover their health and vitality. Here, you can admire the dolphins up close and feel their cuteness and wonder.</p>
              <img class= "tour_overlay4img" src="./image/tour/tour_intro_seaturtle.jpg" alt="error">
              <div class="btn_modal">
              <button type="button" class="btn_modal_close1" id="btn4">Introduction</button>
              <button type="button" class="btn_modal_close2">Close</button>
              </div>
            </article>
          </div>
  
      <!----------------------- 四個動物圖片的圖文--------------------->
      <div class = "tour_title_block">
        <div class="tour_title_area">
          <h1 class="tour_title1">Introduction</h1>
          <h4 class="tour_title2">Click picture to see more information !</h4>
        </div>  
      </div>
  
      <div class="tour_row">
        <!-- <div id="no1"></div> -->
        <div class="tour_slide" id="no1">         
          <div class = "tour_slide_word">
          <h4>Dolphin</h4>
          <p>&nbsp;&nbsp;&nbsp;&nbsp;With big bodies and big eyes, they are the reptilian inhabitants of the ocean-turtles, and their lives can be said to be a legend...</p>
          <button class="tour_row_button3" >See more</button>          
          </div>
          <div class="tour_content" >           
            <div class="tour_headerimg" >
              <img src="./image/tour/tour_dolphin.jpg" alt="error">            
            </div>

            <div class="tour_word">
              <h4>Dolphin</h4>
              <p>&nbsp;&nbsp;&nbsp;&nbsp;With big bodies and big eyes, they are the reptilian inhabitants of the ocean-turtles, and their lives can be said to be a legend!</p>
              <br>
              <p>&nbsp;&nbsp;&nbsp;&nbsp;From the moment they broke the egg, they began their struggle career, desperately rushing to the ocean from the perilous beach~</p>
              <div class="btn_modal">
                <a href="journal.html"><button class="tour_row_button1" >See Journal</button></a>
                <button class="tour_row_button2" >Close</button>
              </div>
            </div>
          </div>
        </div>
  
        <div class="tour_slide"  id="no2" >
          <div class = "tour_slide_word">
            <h4>Whale</h4>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;With big bodies and big eyes, they are the reptilian inhabitants of the ocean-turtles, and their lives can be said to be a legend...</p>
              <button class="tour_row_button3" >See more</button>          
            </div>
          <div class="tour_content"  >
            <div class="tour_headerimg" >
              <img src="./image/tour/tour_whale.jpg" alt="error">
            </div>
            <div class="tour_word" >
              <h4>Whale</h4>
              <p>&nbsp;&nbsp;&nbsp;&nbsp;With big bodies and big eyes, they are the reptilian inhabitants of the ocean-turtles, and their lives can be said to be a legend!</p>
              <br>
              <p>&nbsp;&nbsp;&nbsp;&nbsp;From the moment they broke the egg, they began their struggle career, desperately rushing to the ocean from the perilous beach~</p>
              <div class="btn_modal">
                <a href="journal.html"><button class="tour_row_button1" >See Journal</button></a>
                <button class="tour_row_button2" >Close</button>
              </div>
            </div>
          </div>
        </div>
  
        <div class="tour_slide" id="no3">
          <div class = "tour_slide_word">
            <h4>Seal</h4>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;With big bodies and big eyes, they are the reptilian inhabitants of the ocean-turtles, and their lives can be said to be a legend...</p>
              <button class="tour_row_button3" >See more</button>          
            </div>
          <div class="tour_content" >
            <div class="tour_headerimg" >
              <img src="./image/tour/tour_seal.jpg" alt="error">
            </div>
            <div class="tour_word">
              <h4>Seal</h4>
              <p>&nbsp;&nbsp;&nbsp;&nbsp;With big bodies and big eyes, they are the reptilian inhabitants of the ocean-turtles, and their lives can be said to be a legend!</p>
              <br>
              <p>&nbsp;&nbsp;&nbsp;&nbsp;From the moment they broke the egg, they began their struggle career, desperately rushing to the ocean from the perilous beach~</p>
              <div class="btn_modal">
                <a href="journal.html"><button class="tour_row_button1" >See Journal</button></a>
                <button class="tour_row_button2" >Close</button>
              </div>
            </div>
          </div>
        </div>
  
        <div class="tour_slide" id="no4" >
          <div class = "tour_slide_word">
            <h4>Turtle</h4>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;With big bodies and big eyes, they are the reptilian inhabitants of the ocean-turtles, and their lives can be said to be a legend...</p>
              <button class="tour_row_button3" >See more</button>          
            </div>
          <div class="tour_content" >
            <div class=" tour_headerimg" >
              <img src="./image/tour/tour_sea_turtle.jpg" alt="error">
            </div>
            <div class="tour_word">
              <h4>Turtle</h4>
              <p>&nbsp;&nbsp;&nbsp;&nbsp;With big bodies and big eyes, they are the reptilian inhabitants of the ocean-turtles, and their lives can be said to be a legend!</p>
              <br>
              <p>&nbsp;&nbsp;&nbsp;&nbsp;From the moment they broke the egg, they began their struggle career, desperately rushing to the ocean from the perilous beach~</p>
              <div class="btn_modal">
                <a href="journal.html"><button class="tour_row_button1" >See Journal</button></a>
                <button class="tour_row_button2" >Close</button>
              </div>
          </div> 
        </div>
      </div>
    </main>


      <!---------------------遊戲--------------------- -->
      <div class="gameUniqueClass">
      <div class = "tour_game_title_block">
        <div class="tour_game_title_area">
          <h1 class="tour_game_title1">Play a game to earn points!</h1>
        </div>  
      </div>

        <body onload="init();" style="margin:0px;">
            <div id="app">
                <div class="loading"></div>
        
                <a class="gamePlayBtn"><img src="./image/game/play.png" alt="" id="gamePlayBtn"></a>
                <div class="over">
                    <div class="box">
                        <img src="./image/game/gameover.png" alt="">
                        <a class="resetPlay"><img src="./image/game/play.png" alt=""></a>
                    </div>
                </div>
                <div class="hpBar">
                    <h2>HP</h2>
                    <div class="hpBox">
                        <div class="hp"></div>
                    </div>
                </div>	
                <div id="animation_container" style="background-color:rgba(255, 255, 255, 0); width:700px; height:400px">
                    <canvas id="canvas" width="700" height="400" style="position: absolute; display: block; background-color:rgba(255, 255, 255, 0);"></canvas>
                    <div id="dom_overlay_container" style="pointer-events:none; overflow:hidden; width:700px; height:400px; position: absolute; left: 0px; top: 0px; display: block;">
                    </div>
                </div>
            </div>
        </body>

        <!-- 得到分數 -->
        <form action="">
          <div class="game_point_block">
          <p class="game_title">Earn : </p> 
          <p class="winNum">0</p>
          <p class="game_point">points!</p>
          </div>
        </form>
        <input type="button" name="save" value="Save" class="game_btn" id="game_btn">

        <!-- 遊戲燈箱 -->
        <div class="game_overlay">
          <article>
            <h3>Points have been renewing !</h3>
            <div>
              <span id="game_memName">Member Name : </span>
              <span id="memName2">&nbsp;</span>
            </div>
            <div>
              <span id="game_old_point">Old points :  </span>
              <span id="point">&nbsp; </span>
            </div>
            <div>
              <span id="game_new_point">New points :  </span>
              <span class="lightboxwinNum" id="lightboxwinNum">&nbsp;</span>
            </div>
            <input type="button" class="game_btn_close" value="close" id="game_btn_close">
            <img src="./image/game/header_tour.png" alt="error" class="tour_game_turtle">
          </article>
        </div>

        <!-- 會員燈箱：登入 -->
        <!-- <div id="lightBox" style="display:none">
          <table border="1" align="center" cellspacing="0" id="tableLogin">
          <tr><td>帳號</td><td><input type="text" name="memId" id="memId"></td></tr>
          <tr><td>密碼</td><td><input type="password" name="memPsw" id="memPsw"></td></tr>
          <tr><td colspan="2" align="center">
                  <input type="button" id="btnLogin" value="登入">
                  <input type="button" id="btnLoginCancel" value="取消">
              </td></tr>
          </table>
          </div> -->
  
        <!-- 右上角登入bar -->
        <!-- <div id="game_bar">
        <span id="memName">&nbsp;</span>
        <span id="spanLogin">登入</span>
        </div> -->
        
    </div>

   
    <!-- 你的code打這上面 -->
  </div>

  <footer>
    Copyright 2020 ED103-G1 Aqua Wonderland All Rights Reserved
  </footer>
   
   <!------------------------------遊戲的code--------------------------->
   <script>
    //  --------------遊戲: 會員登入頁面-------------
    //  function $id(id){
    // return document.getElementById(id);
    // }	
    // let member;

    // function showLoginForm(){
    //   // if($id('spanLogin').innerHTML == "登入"){
    //   //   $id('lightBox').style.display = 'block';
    //   // }else{//登出
    //   //   $id('memName').innerHTML = '&nbsp';
    //   //   $id('memName2').innerHTML = '&nbsp';
    //   //   $id('spanLogin').innerHTML = '登入';
    //   // }
    // }//showLoginForm

    // function sendForm(){
    //   //=====使用Ajax 回server端,取回登入者姓名, 放到頁面上 
    //   let memId = $id("memId").value;  
    //   let memPsw = $id("memPsw").value; 
    //   let xhr = new XMLHttpRequest();
    //   xhr.onload = function(){
    //     member = JSON.parse(xhr.responseText);
    //     console.log(member);
    //     if(member.memId){
    //       $id("memName").innerText = member.memName;
    //       $id("memName2").innerText = member.memName;
    //       $id("point").innerText = member.oldPoint;
    //       $id('spanLogin').innerHTML = '登出';
    //       //將登入表單上的資料清空，並隱藏起來
    //       $id('lightBox').style.display = 'none';
    //       $id('memId').value = '';
    //       $id('memPsw').value = '';          
    //     }else{
    //         window.alert("帳密錯誤~");
    //     }
    //   }

    //   xhr.open("Post", "tourgame_json.php", true);
    //   xhr.setRequestHeader("content-type","application/x-www-form-urlencoded");
    //   let loginInfoObj = {memId,memPsw};

    //   let loginInfo = JSON.stringify(loginInfoObj);
    //   let data_info = `loginInfo=${loginInfo}`;
    //   xhr.send(data_info); 
    // }

    // function cancelLogin(){
    //   //將登入表單上的資料清空，並將燈箱隱藏起來
    //   $id('lightBox').style.display = 'none';
    //   $id('memId').value = '';
    //   $id('memPsw').value = '';
    // }

    // function init(){
    //   //===設定spanLogin.onclick 事件處理程序是 showLoginForm

    //   $id('spanLogin').onclick = showLoginForm;

    //   //===設定btnLogin.onclick 事件處理程序是 sendForm
    //   $id('btnLogin').onclick = sendForm;

    //   //===設定btnLoginCancel.onclick 事件處理程序是 cancelLogin
    //   $id('btnLoginCancel').onclick = cancelLogin;

  
    // }; //window.onload

    // window.addEventListener("load",init,false);

    // //----------------遊戲: 點save 按鈕, 觸發事件: new point 去抓資料庫的更新值-----------------
    // window.addEventListener("load", function(){
    //   // alert(0)
    //   document.querySelector(".game_btn").addEventListener("click", function(){
    //     // alert(111)
    //     let xhr = new XMLHttpRequest();
    //     xhr.onload = function(){
    //     }
    //     // let url = `updateGamePoint.php?memId=${member.memId}&point=${member.point+document.querySelector(".lightboxwinNum").innerText}`;
    //     //從updateGamePoint.php抓某會員與該會員的點數值，並在class=lightboxwinNum的地方印出來。(div,p,span等是用.innerText印出 / input 是用.value印出)
    //     // let url = `updateGamePoint.php?memId=${document.querySelector("#memNameInProfileBlock").innerText}`;
    //     let url = `updateGamePoint.php?memId=${member.memId}&point=${document.querySelector(".lightboxwinNum").innerText}`;
    //     // console.log(url)
    //     xhr.open("get", url, true);
    //     xhr.send(null);        
    //   },false);
    // }, false);
    // window.addEventListener("load",init,false);
     
   //-----------------------------------------------------------------------

   </script>
   <!--AOS-->
   <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
   <script>
       AOS.init();
   </script>
  <script>
  //--------點擊第一棟房子:dolphine館, 出現介紹圖文------------
    $(function(){  
  // 開啟 Modal 彈跳視窗
  $("img.tour_house1_hover").on("click", function(){
    $("div.tour_overlay1").addClass("-on");
  }); 
  // 關閉 Modal
  $("button.btn_modal_close1").on("click", function(){
    $("div.tour_overlay1").addClass("-opacity-zero");
    // 設定隔一秒後，移除相關 class
    setTimeout(function(){
      $("div.tour_overlay1").removeClass("-on -opacity-zero");
    }, 0);
  }); 
});

//---------第一棟房子:dolphine館,出現介紹圖文後, 按關閉收合----------
$(function(){  
  // 關閉 Modal
  $("button.btn_modal_close2").on("click", function(){
    $("div.tour_overlay1").addClass("-opacity-zero");
    // 設定隔一秒後，移除相關 class
    setTimeout(function(){
      $("div.tour_overlay1").removeClass("-on -opacity-zero");
    }, 0);
  }); 
});

//---------點擊第二棟房子:whale館, 出現介紹圖文----------------
$(function(){  
  $("img.tour_house2_hover").on("click", function(){
    $("div.tour_overlay2").addClass("-on");
  });
  $("button.btn_modal_close1").on("click", function(){
    $("div.tour_overlay2").addClass("-opacity-zero");
    setTimeout(function(){
      $("div.tour_overlay2").removeClass("-on -opacity-zero");
    }, 0);
  });  
});

//----------第二棟房子:whale館,出現介紹圖文後, 關閉收合------------
$(function(){  
  // 關閉 Modal
  $("button.btn_modal_close2").on("click", function(){
    $("div.tour_overlay2").addClass("-opacity-zero");
    // 設定隔一秒後，移除相關 class
    setTimeout(function(){
      $("div.tour_overlay2").removeClass("-on -opacity-zero");
    }, 0);
  }); 
});

//-----------點擊第三棟房子:whale館, 出現介紹圖文----------------
$(function(){  
  $("img.tour_house3_hover").on("click", function(){
    $("div.tour_overlay3").addClass("-on");
  });
  $("button.btn_modal_close1").on("click", function(){
    $("div.tour_overlay3").addClass("-opacity-zero");
    setTimeout(function(){
      $("div.tour_overlay3").removeClass("-on -opacity-zero");
    }, 0);
  });  
});

//----------第三棟房子:seal館,出現介紹圖文後, 關閉收合---------
$(function(){  
  // 關閉 Modal
  $("button.btn_modal_close2").on("click", function(){
    $("div.tour_overlay3").addClass("-opacity-zero");
    // 設定隔一秒後，移除相關 class
    setTimeout(function(){
      $("div.tour_overlay3").removeClass("-on -opacity-zero");
    }, 0);
  }); 
});

//-----------點擊第四棟房子:sea turtle館, 出現介紹圖文--------
$(function(){  
  $("img.tour_house4_hover").on("click", function(){
    $("div.tour_overlay4").addClass("-on");
  });
  $("button.btn_modal_close1").on("click", function(){
    $("div.tour_overlay4").addClass("-opacity-zero");
    setTimeout(function(){
      $("div.tour_overlay4").removeClass("-on -opacity-zero");
    }, 0);
  });  
});

//第-------四棟房子:sea turtle 館,出現介紹圖文後, 關閉收合---------
$(function(){  
  // 關閉 Modal
  $("button.btn_modal_close2").on("click", function(){
    $("div.tour_overlay4").addClass("-opacity-zero");
    // 設定隔一秒後，移除相關 class
    setTimeout(function(){
      $("div.tour_overlay4").removeClass("-on -opacity-zero");
    }, 0);
  }); 
});

//---------點擊地圖的圖文介紹按鈕,會往下移動---------
$(document).ready(function() {
       $("#btn1").click(function() {
         $("html, body").animate({
           scrollTop: $("#no1").offset().top }, {duration: 500,easing: "swing"});
         return false;
       });
       $("#btn2").click(function() {
         $("html, body").animate({
           scrollTop: $("#no1").offset().top }, {duration: 500,easing: "swing"});
         return false;
       });
       $("#btn3").click(function() {
         $("html, body").animate({
           scrollTop: $("#no3").offset().top }, {duration: 500,easing: "swing"});
         return false;
       });
       $("#btn4").click(function() {
         $("html, body").animate({
           scrollTop: $("#no3").offset().top }, {duration: 500,easing: "swing"});
         return false;
       });
     });

//------------當滑鼠移入房子, 出現hover效果-------------
$('.tour_houseA').hover(function(){
  $(this).toggleClass('tour_house_show');
  $(this).next().toggleClass('tour_house_show');
},function(){
})

//------------當滑鼠移出房子, 移除hover效果-------------
$('.tour_houseB').hover(function(){
},function(){
  $(this).toggleClass('tour_house_show');
  $(this).prev().toggleClass('tour_house_show');
})

//----當滑鼠移入dolphin紅色圈圈, 其底下房子出現hover效果------
$('.tour_dolphin_wave').hover(function(){
  $('.tour_house1').toggleClass('tour_house_show');
  $('.tour_house1_hover').toggleClass('tour_house_show');
},function(){
})

//-----當滑鼠移出dolphin紅色圈圈, 其底下房子移除hover效果----
$('.tour_dolphin_wave').hover(function(){
},function(){
  $('.tour_house1_hover').toggleClass('tour_house_show');
  $('.tour_house1').toggleClass('tour_house_show');
})

//-----當滑鼠移入whale紅色圈圈, 其底下房子出現hover效果-----
$('.tour_whale_wave').hover(function(){
  $('.tour_house2').toggleClass('tour_house_show');
  $('.tour_house2_hover').toggleClass('tour_house_show');
},function(){
})

//-----當滑鼠移出whale紅色圈圈, 其底下房子移除hover效果-----
$('.tour_whale_wave').hover(function(){
},function(){
  $('.tour_house2_hover').toggleClass('tour_house_show');
  $('.tour_house2').toggleClass('tour_house_show');
})

//-----當滑鼠移入seal紅色圈圈, 其底下房子出現hover效果-----
$('.tour_seal_wave').hover(function(){
  $('.tour_house3').toggleClass('tour_house_show');
  $('.tour_house3_hover').toggleClass('tour_house_show');
},function(){
})

//-----當滑鼠移出seal紅色圈圈, 其底下房子移除hover效果-----
$('.tour_seal_wave').hover(function(){
},function(){
  $('.tour_house3_hover').toggleClass('tour_house_show');
  $('.tour_house3').toggleClass('tour_house_show');
})

//-----當滑鼠移入sea turtle紅色圈圈, 其底下房子出現hover效果-----
$('.tour_seaturtle_wave').hover(function(){
  $('.tour_house4').toggleClass('tour_house_show');
  $('.tour_house4_hover').toggleClass('tour_house_show');
},function(){
})

//-----當滑鼠移出sea turtle紅色圈圈, 其底下房子移除hover效果-----
$('.tour_seaturtle_wave').hover(function(){
},function(){
  $('.tour_house4_hover').toggleClass('tour_house_show');
  $('.tour_house4').toggleClass('tour_house_show');
})


//-----點擊dolphin紅色圈圈, 出現介紹圖文-----
$(function(){  
  $("img.tour_dolphin_wave").on("click", function(){
    $("div.tour_overlay1").addClass("-on");
  });
  $("button.btn_modal_close1").on("click", function(){
    $("div.tour_overlay1").addClass("-opacity-zero");
    setTimeout(function(){
      $("div.tour_overlay1").removeClass("-on -opacity-zero");
    }, 0);
  });  
});

//-----點擊whale紅色圈圈, 出現介紹圖文-----
$(function(){  
  $("img.tour_whale_wave").on("click", function(){
    $("div.tour_overlay2").addClass("-on");
  });
  $("button.btn_modal_close1").on("click", function(){
    $("div.tour_overlay2").addClass("-opacity-zero");
    setTimeout(function(){
      $("div.tour_overlay2").removeClass("-on -opacity-zero");
    }, 0);
  });  
});

//-----點擊seal紅色圈圈, 出現介紹圖文-----
$(function(){  
  $("img.tour_seal_wave").on("click", function(){
    $("div.tour_overlay3").addClass("-on");
  });
  $("button.btn_modal_close1").on("click", function(){
    $("div.tour_overlay3").addClass("-opacity-zero");
    setTimeout(function(){
      $("div.tour_overlay3").removeClass("-on -opacity-zero");
    }, 0);
  });  
});

//-----點擊sea turtle紅色圈圈, 出現介紹圖文-----
$(function(){  
  $("img.tour_seaturtle_wave").on("click", function(){
    $("div.tour_overlay4").addClass("-on");
  });
  $("button.btn_modal_close1").on("click", function(){
    $("div.tour_overlay4").addClass("-opacity-zero");
    setTimeout(function(){
      $("div.tour_overlay4").removeClass("-on -opacity-zero");
    }, 0);
  });  
});


// ---------四大動物介紹: 按圖片出現介紹文, 按close 恢復原狀---------------
$('.tour_slide').click(function(){
  $(this).children().addClass('tour_content_show');
  $(this).addClass('tour_slide_show');
  // $('.tour_content').toggleClass('tour_content_show');
})

$('.tour_row_button2').click(function(e){
  // $('.tour_content').toggleClass('tour_content_show');
  $(this).closest('.tour_content').removeClass('tour_content_show');
  $(this).closest('.tour_slide').removeClass('tour_slide_show');
  e.stopPropagation();
})
</script>

<!-- 每次開瀏覽器會先執行1次拼圖,之後就不會再進行 -->
<!-- 如果進開瀏覽器name為空値, 就先執行拼圖, 再給name 値"onload"，並且每100毫秒就檢查一次name是否為空値。 -->
<!-- 因為有給name値"onload"所以不會執行拼圖，必須重新開啟瀏覽器才行 -->
<script>
  function openly(){
          if(window.name==""){
              window.location.href="./puzzle.html";
          }
          window.name="onload";
  }
  setTimeout('openly()',100);
  </script>



<!--------------------- 遊戲------------------>
<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
<script src="./js/ndgmr.Collision.js"></script>
<script src="./js/Mario.js"></script>  
<script src="./js/tour/tour_show_game_points.js"></script>
<script>
    var canvas, stage, exportRoot, anim_container, dom_overlay_container, fnStartAnimation;
    function init() {
        canvas = document.getElementById("canvas");
        anim_container = document.getElementById("animation_container");
        dom_overlay_container = document.getElementById("dom_overlay_container");
        images = images||{};
        ss = ss||{};
        var loader = new createjs.LoadQueue(false);
        loader.addEventListener("fileload", handleFileLoad);
        loader.addEventListener("complete", handleComplete);
        loader.loadManifest(lib.properties.manifest);
    }
    function handleFileLoad(evt) {	
        if (evt.item.type == "image") { images[evt.item.id] = evt.result; }	
    }
    function handleComplete(evt) {
        //This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
        var queue = evt.target;
        var ssMetadata = lib.ssMetadata;
        for(i=0; i<ssMetadata.length; i++) {
            ss[ssMetadata[i].name] = new createjs.SpriteSheet( {"images": [queue.getResult(ssMetadata[i].name)], "frames": ssMetadata[i].frames} )
        }
        exportRoot = new lib.Mario();
        stage = new createjs.Stage(canvas);
        stage.addChild(exportRoot);	
    
        const SPEED = 10;		//速度
        const ATTACK = 10;		//沒吃到金幣扣的血
        let isStart = false;	//是否點擊開始遊戲
        let Hp = 100;			//總血量
        let winNum = 0; 		//吃到的金幣數
        let lightboxwinNum = 0; 		//吃到的
        let Positions = 1;		//方向判斷
        let isKeydown = false;	//是否按下鍵盤
    
        //創造小烏龜
        var Mario = new lib.MarioUser();
        Mario.x = 356;
        Mario.y = 353;
        exportRoot.addChild(Mario);
    
        
        let loadint = 0;	//目前載入進度
        const sounds = [
            {src:"./image/game/play.mp3", id:"play"},
            {src:"./image/game/coin.mp3", id:"coin"},
            {src:"./image/game/boom.mp3", id:"boom"},
            // {src:"./image/game/bg.mp3", id:"bg"},
        ];
        createjs.Sound.alternateExtensions = ["mp3"];
        createjs.Sound.addEventListener("fileload", (e)=>{
            loadint++
            if(loadint === sounds.length){
                document.querySelector(".loading").style.display = 'none';
                bgAudio = createjs.Sound.play("bg", {loop:-1});
                bgAudio.volume = 0.2;
            }
        });
        createjs.Sound.registerSounds(sounds, "./");
    
    
        //每秒產生金幣
        let timeCoin = setInterval(()=>{
            if(!isStart) return; 
            let Coin = new lib.Coin();
            Coin.x = Math.floor(Math.random() * (670 - 30 + 1) + 30); //亂數 * (最大值 - 最小值 + 1) + 最小值
            Coin.y = -50;
            exportRoot.addChildAt(Coin, 1);
            
            createjs.Tween.get(Coin)
            .to({y: 400}, 2500)
            .call(()=>{
                console.log("金幣沒吃到");
                exportRoot.removeChild(Coin);
                Hp -= ATTACK;
                document.querySelector(".hp").style.width = `${Hp}%`;
            })
            .addEventListener("change", ()=>{
                let hit = ndgmr.checkRectCollision(Coin, Mario); //金幣跟小烏龜碰撞
                if(hit){
                    createjs.Sound.play("coin")
                    createjs.Tween.removeTweens(Coin); //移除金幣動畫
                    exportRoot.removeChild(Coin); //移除金幣元件
                    // winNum ++;
                    winNum = winNum + 10;
                    //新點數=獲得的點數+資料庫的目前點數
                    lightboxwinNum = winNum + parseInt(document.querySelector("#point").innerText);
                    //玩遊戲獲得的點數印出來
                    document.querySelector(".winNum").innerHTML = winNum;
                    //新點數印出來
                    document.querySelector(".lightboxwinNum").innerHTML = lightboxwinNum;
                }
            })
        }, 1000)
    
    
    
    
    
    
        //遊戲開始按鈕
        document.querySelector(".gamePlayBtn").addEventListener("click", ()=>{
            createjs.Sound.play("play")
            isStart = true;
            document.querySelector(".gamePlayBtn").style.display = "none";
            window.addEventListener("keydown", keydownMoveFn);
            window.addEventListener("keyup", keyupMoveFn);
        })
    
        //遊戲重新開始
        document.querySelector(".resetPlay").addEventListener("click",()=>{
            window.location.reload();
        })
    
        function keydownMoveFn(e){
            if(isKeydown) return;
            if(e.keyCode===37 || e.keyCode===39){
                isKeydown = true;
                Positions = e.keyCode === 39 ? 1 : -1;
                Mario.gotoAndPlay("run");
            }
        }
    
        function keyupMoveFn(e){
            isKeydown = false;
            Mario.gotoAndPlay("stop");
        }
    
    
        createjs.Ticker.addEventListener("tick", tickFn)
        function tickFn(){
            if(Hp <= 0){
                clearInterval(timeCoin);
                createjs.Sound.play("boom")
                Mario.gotoAndPlay("del");
                document.querySelector(".over").style.display = "flex";
                window.removeEventListener("keydown", keydownMoveFn)
                window.removeEventListener("keyup", keyupMoveFn)
                createjs.Ticker.removeEventListener("tick", tickFn)
            }
            if(!isKeydown) return;
            Mario.x += SPEED * Positions;
            Mario.scaleX = Positions;
    
        }
    
    
        //Registers the "tick" event listener.
        fnStartAnimation = function() {
            createjs.Ticker.setFPS(lib.properties.fps);
            createjs.Ticker.addEventListener("tick", stage);
        }	    
        //Code to support hidpi screens and responsive scaling.
        function makeResponsive(isResp, respDim, isScale, scaleType) {		
            var lastW, lastH, lastS=1;		
            window.addEventListener('resize', resizeCanvas);		
            resizeCanvas();		
            function resizeCanvas() {			
                var w = lib.properties.width, h = lib.properties.height;			
                var iw = window.innerWidth, ih=window.innerHeight;			
                var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;			
                if(isResp) {                
                    if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {                    
                        sRatio = lastS;                
                    }				
                    else if(!isScale) {					
                        if(iw<w || ih<h)						
                            sRatio = Math.min(xRatio, yRatio);				
                    }				
                    else if(scaleType==1) {					
                        sRatio = Math.min(xRatio, yRatio);				
                    }				
                    else if(scaleType==2) {					
                        sRatio = Math.max(xRatio, yRatio);				
                    }			
                }			
                canvas.width = w*pRatio*sRatio;			
                canvas.height = h*pRatio*sRatio;
                canvas.style.width = dom_overlay_container.style.width = anim_container.style.width =  w*sRatio+'px';				
                canvas.style.height = anim_container.style.height = dom_overlay_container.style.height = h*sRatio+'px';
                stage.scaleX = pRatio*sRatio;			
                stage.scaleY = pRatio*sRatio;			
                lastW = iw; lastH = ih; lastS = sRatio;		
            }
        }
        makeResponsive(false,'both',false,1);	
        fnStartAnimation();
    }
    </script>

    <!------------------ 遊戲燈箱 ------------------>
<script>
      $(function(){
  
  // 開啟 Modal 彈跳視窗
  // $(".game_btn").on("click", function(){
  //   $("div.game_overlay").addClass("-on");
  // });
  
  // 關閉 Modal
  // $(".game_btn_close").on("click", function(){
  //   $("div.game_overlay").addClass("-opacity-zero");
    
    // 設定隔一秒後，移除相關 class
  //   setTimeout(function(){
  //     $("div.game_overlay").removeClass("-on -opacity-zero");
  //   }, 50);
  // });
  
});


</script>

</body>
</html>