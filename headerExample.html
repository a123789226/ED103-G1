<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="./image/header/favicon.ico">
    <link rel="stylesheet" href="./css/style.css">
    <title>Aqua Wonderland</title>
</head>
<body>
  <!-- 下面是背景的div，先不要動到 -->
  <div class="memBackground">
    <div class="commonBG00 commonBGSet"></div>
    <div class="commonBG01 commonBGSet"></div>
    <div class="commonBG02 commonBGSet"></div>
    <div class="commonBGLeft commonBGSet"></div>
    <div class="commonBGRight commonBGSet"></div>
    <img src="./image/background/fish1.png" alt="" class="BGFish1">
    <img src="./image/background/fish2.png" alt="" class="BGFish2">
  </div> 
  <!-- 上面是背景的div，先不要動到 -->

  <!-- Log In開始 -->
  <div id="memLightBox" class="memLogin overlay">
    <form action="" class="LogInForm" id="LogInForm" method="post">
      <div class="btn_modal_close">
        <div></div>
        <div></div>
      </div>
      <h3 class="memLogTitle">LOG IN</h3>
      <input type="text" name="memId" id="memId" minlength="6" maxlength="12" pattern="[A-Za-z0-9]*" placeholder="Username" onfocus="this.placeholder=''" onblur="this.placeholder='Username'" size="25"/><br>
      <input type="password" name="memPsw" id="memPsw" minlength="6" maxlength="12" pattern="[A-Za-z0-9]*" placeholder="Password" onfocus="this.placeholder=''" onblur="this.placeholder='Password'" size="25"/><br>
      <h6><a href="./memberLock.html" class="memForgot memForget_modal">Forget Password?</a></h6><br>
      <input type="button" class="submitBtnLog" id="btnLogin" value="LOG IN"><br>
      <div class="memLine">
        <h5>OR</h5>
      </div>
      <p>Don't have an account?</p><br>
      <a href="./memberlogin.html"><button type="button" class="submitBtnSign" id="btnSignup">SIGN UP</button></a>
    </form>
  </div>
  <!-- Log In結束 -->
  
  <!-- header開始 -->
  <header class="main_menu">
    <!-- header第一區塊 主導覽列 -->
    <nav class="main_nav">
      <div class="logo_box">
        <a href="homepage.html" class="logo">
          <img src="./image/header/logo.png" alt="">
        </a>
        <a href="" class="logo_text_box">
          <h1 class="logo_text">AQUA WONDERLAND</h1>
        </a>
      </div>
      <ul class="main_menu_ul" id="main_menu_ul">
        <li class="main_menu_li active">
          <a href="tour.html" class="li_logo">
            <img src="./image/header/header_tour.png" alt="">
            <img src="./image/header/header_tour_cover.png" alt="">
          </a>
          <a href="tour.html" class="li_text">TOUR</a>
        </li>
        <li class="main_menu_li active">
          <a href="journal.html" class="li_logo">
            <img src="./image/header/header_journal.png" alt="">
            <img src="./image/header/header_journal_cover.png" alt="">
          </a>
          <a href="journal.html" class="li_text">JOURNAL</a>
        </li>
        <li class="main_menu_li active">
          <a href="ticket.html" class="li_logo">
            <img src="./image/header/header_ticket.png" alt="">
            <img src="./image/header/header_ticket_cover.png" alt="">
          </a>
          <a href="ticket.html" class="li_text">TICKET</a>
        </li>
        <li class="main_menu_li active">
          <a href="vote.html" class="li_logo">
            <img src="./image/header/header_vote.png" alt="">
            <img src="./image/header/header_vote_cover.png" alt="">
          </a>
          <a href="vote.html" class="li_text">VOTE</a>
        </li>
        <li class="main_menu_li active">
          <a href="blog1.php" class="li_logo">
            <img src="./image/header/header_blog.png" alt="">
            <img src="./image/header/header_blog_cover.png" alt="">
          </a>
          <a href="blog1.php" class="li_text">BLOG</a>
        </li>
      </ul>
      <div class="header_right">
        <span class="member_box btn_modal" id="btn_modal">
          <img src="./image/header/header_member_fish.png" alt="" title="Log In" id="memberPic" onerror="javascript:this.src='./image/header/header_member_fish_login.png'">
        </span>
        <a class="cart_box" href="cart.html">
          <img src="./image/header/header_cart.png" alt="">
          <span class="cart_amount"></span>
        </a>
        <div class="hamburger_box" id="hamburger_box">
          <div class="hamburger">
            <span class="hamburger_line is-active" id="hamburger_line"></span>
            <span class="hamburger_cross" id="hamburger_cross">&times;</span>
          </div>
        </div>
      </div>
    </nav>
    
    <!-- header第二區塊 會員登入後點頭像出線的小窗 -->
    <div class="memProfileBlock" id="memProfileBlock" style="display: none;">
      <p class="memNameInProfileBlock"><span>Hello!&nbsp;&nbsp;</span><span id="memNameInProfileBlock"></span></p>
      <a href="./memberProfile.html" class="memProfileLink">Member Profile</a>
      <p id="SignOutLink">Sign Out</p>
    </div>

  </header> 

  <!-- header結束 -->
  
  
  <div>
    <!-- Title -->
    <!-- <div class="commonTitleBox">
      <h2 class="commonTitle">Big Title</h2>
      <h4 class="commonSubTitle">Lorem ipsum dolor sit amet consectetur.</h4>
    </div> -->
  <!-- 你的code打這下面 -->

    <button id="test" style="margin-top: 180px;">alert看member.memId值</button>
    <br>
    <button id="test2" style="margin-top: 30px;">非登入狀態跳燈箱，登入狀態則alert該會員Id</button>
    <br>
    <a href="./homepage.html" id="test3" style="margin-top: 30px; color: white; border: 1px solid white;">非登入狀態阻止頁面跳轉，登入狀態則跳到首頁</a>
    <br>
    <button id="test4" style="margin-top: 30px;">是會員的話，透過ajax非同步執行某php程式，非會員阻止按鈕預設行為，跳出登入燈箱</button>
    <br>
  <!-- 你的code打這上面 -->

  </div>

  <footer>
    Copyright 2020 ED103-G1 Aqua Wonderland All Rights Reserved
  </footer>

  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="./js/memLogin.js"></script>
  <script src="./js/layout/header.js"></script>

  <script>
    // 自己寫的js、jq如果要放html內要寫在這裡唷

    // 這個checkMemberLogin函數是用來判別會員有沒有登入用
    // 由於要用到./js/memLogin.js內在整個作用域宣告的變數 member
    // 所以這這個<script>順序一定要在他下面
    
    
    function checkMemberLogin(){
      // 頁面剛加載完成，在memLogin.js內會透過ajax將變數member的值回傳

      // 由於"checkMemberLogin這個函數"與"memLogin.js一開始給予member值的函數"是同時進行
      // 所以此時member在這裡還是undefined的唷
      // 你可以打開試試看看
      // console.log(member);
      // 因為memLogin.js是大家共用的，也不能在memLogin下面新增自己的東西，所以會有這樣的問題啦= =

      // 上面看不懂沒關係
      // 你只要知道當網頁有建立事件聆聽的物件，啟動事件時，變數member已經是可以使用的東西就好
      // 若現在是登入狀態，那member是一筆有會員資料的物件；若非登入狀態，那member為{}物件

      // 下面的例子，畫面上有一個id為test的按鈕
      // 當觸發click事件
      // 他會判別member.memId是否為真
      document.getElementById('test').addEventListener("click", function(){
        if(member.memId){ //member有memId這個Key值所以它存在，那即是登入狀態
          alert(`是登入狀態，member.memId=${member.memId}`);
        }else{  //member長這樣 {} ，它裡面沒有任何Key值，所以是非登入狀態
          alert(`非登入狀態，member.memId=${member.memId}`);
        }
      });


      //範例2，非登入狀態跳燈箱，登入狀態則alert該會員Id按鈕
      document.getElementById('test2').addEventListener("click", function(){
        if(member.memId){ //是登入狀態
          alert(member.memId);
        }else{  //非登入狀態，跳出登入燈箱
          let overlay = document.getElementsByClassName('overlay');
          overlay[0].classList.add('-on');
        }
      });

      //範例3，非登入狀態阻止頁面跳轉，登入狀態則跳到首頁的按鈕
      document.getElementById('test3').addEventListener("click", function(e){
        if(member.memId){ //是登入狀態
          //跳去<a>標籤指的位置
        }else{  //非登入狀態，阻止按鈕預設行為，跳出登入燈箱
          e.preventDefault();
          let overlay = document.getElementsByClassName('overlay');
          overlay[0].classList.add('-on');
        }
      });

      // 範例4，是會員的話，透過ajax非同步執行某php程式，非會員阻止按鈕預設行為，跳出登入燈箱
      document.getElementById('test4').addEventListener("click", function(e){
        if(member.memId){ //是登入狀態
          alert('請看註解');
        //ajax指令可以打在這裡
        // 需要登入動作才去執行的php通常都會需要寫入會員的資料
        // 這時候就可以透過member物件啦
        // 例如php的sql需要接收memId
        // 那指定的php路徑就可以是
        let url = `某某某.php?memId=${member.memId}`;
        // 之類的
        
        // 還有很多種形式，可是暫時不知道怎麼解釋，請大家參照董董ajax資料包的東西去寫ajax指令Q_Q

        }else{  //非登入狀態，阻止按鈕預設行為，跳出登入燈箱
          e.preventDefault();
          let overlay = document.getElementsByClassName('overlay');
          overlay[0].classList.add('-on');
        }
      });





    }


    // 頁面加載完成後執行checkMemberLogin，這個要放，然後把你要執行的JS都放在checkMemberLogin內比較保險唷
    window.addEventListener('load', checkMemberLogin);

  </script>
</body>
</html>
